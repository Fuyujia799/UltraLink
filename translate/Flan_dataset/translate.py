from utils import RequestPool, check_trunk, quoter
import json
from concurrent.futures import as_completed
import yaml
import tiktoken

encoding = tiktoken.encoding_for_model('gpt-3.5-turbo')

def check_trunk(txt, threshold=4070):
#检查给定文本txt经过某种编码（通过encoding.encode方法）后的长度是否达到或超过了一个特定的阈值，这里的阈值设置为4070个令牌。
#这种检查通常用于确定文本是否过长，以便于后续处理，例如在使用自然语言处理模型时避免输入长度超过模型限制。
    txtlen = len(encoding.encode(txt))
    if txtlen < threshold: #4080 有时候可能没有content
        return False
    else:
        return True

txt = "Information:  - Hydrogen is a chemical element with chemical symbol\u00a0H and atomic number\u00a01. With an atomic weight of , hydrogen is the lightest element on the periodic table. Its monatomic form (H) is the most abundant chemical substance in the Universe, constituting roughly 75% of all baryonic mass. Non-remnant stars are mainly composed of hydrogen in the plasma state. The most common isotope of hydrogen, termed \"protium\" (name rarely used, symbol H), has one proton and no neutrons.  - Hyperboloid structures are architectural structures designed using a hyperboloid in one sheet. Often these are tall structures such as towers where the hyperboloid geometry's structural strength is used to support an object high off the ground, but hyperboloid geometry is also often used for decorative effect as well as structural economy. The first hyperboloid structures were built by Russian engineer Vladimir Shukhov (18531939). The world's first hyperboloid tower is located in Polibino, Dankovsky District, Lipetsk Oblast, Russia.  - Engineers design materials, structures, and systems while considering the limitations imposed by practicality, regulation, safety, and cost. The word \"engineer (\"from the Latin \"ingeniator\"\")\" is derived from the Latin words \"ingeniare\" (\"to contrive, devise\") and \"ingenium\" (\"cleverness\"). The foundation education of an engineer is typically a 4-year bachelor's degree or in some countries, a master's degree in an engineering discipline plus 46 years peer-reviewed professional practice culminating in a project report or thesis. Engineers who seek a professional engineer license in N. America will be required to take further exams in ethics, law and professional practice.  - An oil is any neutral, nonpolar chemical substance that is a viscous liquid at ambient temperatures and is both hydrophobic (immiscible with water, literally \"water fearing\") and lipophilic (miscible with other oils, literally \"fat loving\"). Oils have a high carbon and hydrogen content and are usually flammable and surface active.  - In mathematics, a quadric or quadric surface (quadric hypersurface if \"D\" > 2), is a generalization of conic sections (ellipses, parabolas, and hyperbolas) to any number of dimensions. It is any \"D\"-dimensional hypersurface in -dimensional space defined as the locus of zeros of a quadratic polynomial (\"D\"=1 in the case of conic sections). In coordinates , the general quadric is defined by the algebraic equation  - In mathematics, a hyperboloid is a quadric in three dimensions described by the equation or  - Carbon (from \"coal\") is a chemical element with symbol C and atomic number 6. It is nonmetallic and tetravalentmaking four electrons available to form covalent chemical bonds. Three isotopes occur naturally, C and C being stable, while C is a radioactive isotope, decaying with a half-life of about 5,730\u00a0years. Carbon is one of the few elements known since antiquity.  - 30 St Mary Axe (informally known as The Gherkin and previously as the Swiss Re Building) is a commercial skyscraper in London's primary financial district, the City of London. It was completed in December 2003 and opened in April 2004. With 41 storeys, it is tall and stands on the former sites of the Baltic Exchange and Chamber of Shipping, which were extensively damaged in 1992 by the explosion of a bomb placed by the Provisional IRA in St Mary Axe, the street from which the tower takes its name.  - Vladimir Grigoryevich Shukhov ( 2 February 1939) was a Russian engineer-polymath, scientist and architect renowned for his pioneering works on new methods of analysis for structural engineering that led to breakthroughs in industrial design of the world's first hyperboloid structures, diagrid shell structures, tensile structures, gridshell structures, oil reservoirs, pipelines, boilers, ships and barges. He is also the inventor of the first cracking method.  - Civil Engineering History of the civil engineering profession. Engineering has been an aspect of life since the beginnings of human existence. The earliest practice of civil engineering may have commenced between 4000 and 2000 BC in ancient Egypt, the Indus Valley Civilization, and Mesopotamia (ancient Iraq) when humans started to abandon a nomadic existence, creating a need for the construction of shelter. During this time, transportation became increasingly important leading to the development of the wheel and sailing.  - Structural engineering is mainly a sub-division of civil engineering where structural engineers are trained to understand, predict, and calculate the stability, strength and rigidity of built structures for buildings and non-building structures, to develop designs and integrate their design with that of other designers, and to supervise construction of projects on site. They can also be involved in the design of machinery, medical equipment, vehicles etc. where structural integrity affects functioning and safety.  - Vladimir Grigoryevich Shukhov ( Russian :    ; August 28 ( O.S. August 16 ) 1853 -- February 2 , 1939 ) was a Russian engineer - polymath , scientist and architect renowned for his pioneering works on new methods of analysis for structural engineering that led to breakthroughs in industrial design of world 's first hyperboloid structures , diagrid shell structures , tensile structures , gridshell structures , oil reservoirs , pipelines , boilers , ships and barges . He is also the inventor of the first cracking method . Besides the innovations he brought to the oil industry and the construction of numerous bridges and buildings , Shukhov was the inventor of a new family of doubly curved structural forms . These forms , based on non-Euclidean hyperbolic geometry , are known today as hyperboloids of revolution . Shukhov developed not only many varieties of light - weight hyperboloid towers and roof systems , but also the mathematics for their analysis . Shukhov is particularly reputed for his original designs of hyperboloid towers such as the Shukhov Tower .  - The diagrid (a portmanteau of diagonal grid) is a framework of diagonally intersecting metal, concrete or wooden beams that is used in the construction of buildings and roofs. It requires less structural steel than a conventional steel frame. Hearst Tower in New York City, designed by Sir Norman Foster, uses 21 percent less steel than a standard design. The diagrid obviates the need for columns and can be used to make large column-free expanses of roofing. Another iconic building designed by Sir Norman Foster, 30 St Mary Axe, known as \"The Gherkin\", also uses the diagrid system.    What is the relationship between 'vladimir shukhov' and '2 february 1939'?\nThe answer to this question is:"
print(len(encoding.encode(txt)))






print("<\text>")